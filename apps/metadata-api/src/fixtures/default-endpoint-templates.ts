import type { EndpointTemplate } from "../types.js";

export const DEFAULT_ENDPOINT_TEMPLATES: EndpointTemplate[] = [
  {
    id: "jdbc.postgres",
    family: "JDBC",
    title: "PostgreSQL",
    vendor: "PostgreSQL",
    description: "Register a PostgreSQL instance via JDBC so collections can profile schemas and datasets.",
    domain: "metadata.endpoint.jdbc",
    categories: ["database", "warehouse"],
    protocols: ["jdbc"],
    versions: ["12.x", "13.x", "14.x", "15.x"],
    descriptorVersion: "1.0.0",
    defaultPort: 5432,
    driver: "org.postgresql.Driver",
    docsUrl: "https://www.postgresql.org/docs/current/libpq-connect.html",
    defaultLabels: ["template:jdbc", "template:postgres"],
    fields: [
      {
        key: "host",
        label: "Host",
        required: true,
        valueType: "TEXT",
        placeholder: "localhost",
        description: "Hostname or IP for your Postgres instance.",
      },
      {
        key: "port",
        label: "Port",
        required: true,
        valueType: "PORT",
        defaultValue: "5432",
      },
      {
        key: "database",
        label: "Database",
        required: true,
        valueType: "TEXT",
        placeholder: "postgres",
      },
      {
        key: "username",
        label: "Username",
        required: true,
        valueType: "TEXT",
      },
      {
        key: "password",
        label: "Password",
        required: true,
        valueType: "PASSWORD",
        sensitive: true,
      },
      {
        key: "schemas",
        label: "Schemas",
        required: false,
        valueType: "TEXT",
        placeholder: "public",
        helpText: "Comma-separated schemas to include. Leave blank for all.",
      },
      {
        key: "role",
        label: "Role",
        required: false,
        valueType: "TEXT",
        description: "Optional Postgres role to assume after connecting.",
      },
      {
        key: "ssl_mode",
        label: "SSL mode",
        required: false,
        valueType: "ENUM",
        options: [
          { label: "Disable", value: "disable" },
          { label: "Prefer", value: "prefer" },
          { label: "Require", value: "require" },
          { label: "Verify CA", value: "verify-ca" },
          { label: "Verify Full", value: "verify-full" },
        ],
        defaultValue: "prefer",
      },
      {
        key: "ssl_root_cert",
        label: "SSL root cert",
        required: false,
        valueType: "TEXT",
        description: "Base64 or path to the CA certificate.",
        advanced: true,
      },
      {
        key: "ssl_client_cert",
        label: "SSL client cert",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "ssl_client_key",
        label: "SSL client key",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "application_name",
        label: "Application name",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "connect_timeout_ms",
        label: "Connect timeout (ms)",
        required: false,
        valueType: "NUMBER",
        advanced: true,
      },
      {
        key: "statement_timeout_ms",
        label: "Statement timeout (ms)",
        required: false,
        valueType: "NUMBER",
        advanced: true,
      },
      {
        key: "additional_parameters",
        label: "Additional parameters",
        required: false,
        valueType: "TEXT",
        placeholder: "search_path=public",
        advanced: true,
      },
      {
        key: "version_hint",
        label: "Version hint",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
    ],
    capabilities: [
      {
        key: "metadata",
        label: "Metadata collection",
        description: "Enables schema and dataset discovery for catalog views.",
      },
      {
        key: "preview",
        label: "Dataset preview",
        description: "Allow dataset preview queries when supported by the agent.",
      },
    ],
    sampleConfig: {
      templateId: "jdbc.postgres",
      parameters: {
        host: "localhost",
        port: "5432",
        database: "jira_plus_plus",
        username: "postgres",
        password: "postgres",
        schemas: "public",
        role: "",
        ssl_mode: "prefer",
        ssl_root_cert: "",
        ssl_client_key: "",
        ssl_client_cert: "",
        application_name: "",
        connect_timeout_ms: "",
        statement_timeout_ms: "",
        version_hint: "",
        additional_parameters: "",
      },
    },
    connection: {
      urlTemplate: "jdbc:postgresql://{{host}}:{{port}}/{{database}}",
      defaultVerb: "GET",
    },
  },
  {
    id: "http.confluence",
    family: "HTTP",
    title: "Confluence",
    vendor: "Atlassian",
    description: "Connect to Confluence Cloud REST APIs for semantic document metadata.",
    domain: "docs.confluence",
    categories: ["knowledge", "semantic"],
    protocols: ["https"],
    versions: [],
    descriptorVersion: "1.0.0",
    docsUrl: "https://developer.atlassian.com/cloud/confluence/rest/",
    agentPrompt: "Collect the Confluence base URL (https://<domain>.atlassian.net/wiki), authentication method, and optional space filters.",
    defaultLabels: ["confluence", "semantic"],
    fields: [
      {
        key: "base_url",
        label: "Base URL",
        required: true,
        valueType: "URL",
        placeholder: "https://your-domain.atlassian.net/wiki",
        description: "Root Confluence URL without trailing slash.",
      },
      {
        key: "auth_type",
        label: "Authentication",
        required: true,
        valueType: "ENUM",
        defaultValue: "api_token",
        options: [
          { label: "API token (email + token)", value: "api_token" },
          { label: "Basic (username + password)", value: "basic" },
        ],
      },
      {
        key: "username",
        label: "Username / Email",
        required: false,
        valueType: "TEXT",
        placeholder: "doc-bot@example.com",
        helpText: "Confluence account email associated with the API token.",
        visibleWhen: [{ field: "auth_type", values: ["api_token", "basic"] }],
      },
      {
        key: "api_token",
        label: "API token / Password",
        required: false,
        valueType: "PASSWORD",
        sensitive: true,
        visibleWhen: [{ field: "auth_type", values: ["api_token", "basic"] }],
        description: "Generate API tokens from https://id.atlassian.com/manage-profile/security/api-tokens.",
      },
      {
        key: "space_keys",
        label: "Space keys",
        required: false,
        valueType: "TEXT",
        placeholder: "ENG,PROD",
        helpText: "Optional comma-separated Confluence space keys to limit collection scope.",
      },
      {
        key: "include_archived",
        label: "Include archived spaces",
        required: false,
        valueType: "BOOLEAN",
        defaultValue: "false",
      },
      {
        key: "max_pages_per_space",
        label: "Max pages per space",
        required: false,
        valueType: "NUMBER",
        advanced: true,
        helpText: "Optional safeguard to stop after N pages per space.",
      },
    ],
    capabilities: [
      {
        key: "metadata",
        label: "Metadata collection",
        description: "Enables discovery of Confluence spaces, pages, and attachments.",
      },
      {
        key: "preview",
        label: "Dataset preview",
        description: "Allows previewing Confluence page content directly from the catalog.",
      },
    ],
    sampleConfig: {
      templateId: "http.confluence",
      parameters: {
        base_url: "https://your-domain.atlassian.net/wiki",
        auth_type: "api_token",
        username: "service-account@example.com",
        api_token: "********",
        space_keys: "",
        include_archived: "false",
        max_pages_per_space: "",
      },
    },
    connection: {
      urlTemplate: "{{base_url}}",
      defaultVerb: "GET",
    },
    extras: {
      apiCatalog: [
        {
          key: "space_search",
          method: "GET",
          path: "/wiki/rest/api/space",
          description: "List spaces visible to the authenticated account.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-space/#api-space-get",
          scope: "spaces",
        },
        {
          key: "space_detail",
          method: "GET",
          path: "/wiki/rest/api/space/{spaceKey}",
          description: "Fetch metadata for a specific space.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-space/#api-space-spacekey-get",
          scope: "spaces",
        },
        {
          key: "page_search",
          method: "GET",
          path: "/wiki/rest/api/content",
          description: "Enumerate pages with optional space filters.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content/#api-content-get",
          scope: "pages",
        },
        {
          key: "page_detail",
          method: "GET",
          path: "/wiki/rest/api/content/{id}",
          description: "Fetch a single page including rendered body content.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content/#api-content-id-get",
          scope: "pages",
        },
        {
          key: "attachment_list",
          method: "GET",
          path: "/wiki/rest/api/content/{id}/child/attachment",
          description: "List attachments belonging to a page.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content---attachments/#api-content-id-child-attachment-get",
          scope: "attachments",
        },
        {
          key: "user_current",
          method: "GET",
          path: "/wiki/rest/api/user/current",
          description: "Inspect the authenticated Confluence account.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-user/#api-user-current-get",
          scope: "users",
        },
        {
          key: "site_info",
          method: "GET",
          path: "/wiki/rest/api/settings/systemInfo",
          description: "Fetch Confluence site/system information.",
          docUrl: "https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-settings---system/#api-settings-systeminfo-get",
          scope: "system",
        },
      ],
      datasets: [
        {
          datasetId: "confluence.space",
          name: "Confluence Spaces",
          description: "Logical Confluence spaces (wiki areas) with metadata such as status, type, and links.",
          fields: [
            { name: "spaceKey", dataType: "STRING", nullable: false, comment: "Space key (e.g. ENG)." },
            { name: "name", dataType: "STRING", nullable: false },
            { name: "type", dataType: "STRING", nullable: true },
            { name: "status", dataType: "STRING", nullable: true },
            { name: "url", dataType: "STRING", nullable: true },
            { name: "description", dataType: "STRING", nullable: true },
          ],
          ingestion: {
            unitId: "confluence.space",
            displayName: "Spaces",
            description: "Catalog of Confluence spaces scoped by the endpoint configuration.",
            supportsIncremental: false,
            cdmModelId: "cdm.doc.space",
          },
        },
        {
          datasetId: "confluence.page",
          name: "Confluence Pages",
          description: "Pages and blog posts including creator/updater metadata.",
          fields: [
            { name: "pageId", dataType: "STRING", nullable: false },
            { name: "spaceKey", dataType: "STRING", nullable: false },
            { name: "title", dataType: "STRING", nullable: false },
            { name: "status", dataType: "STRING", nullable: true },
            { name: "createdAt", dataType: "TIMESTAMP", nullable: true },
            { name: "updatedAt", dataType: "TIMESTAMP", nullable: true },
            { name: "author", dataType: "STRING", nullable: true },
            { name: "updatedBy", dataType: "STRING", nullable: true },
          ],
          ingestion: {
            unitId: "confluence.page",
            displayName: "Pages",
            description: "Confluence pages and blog posts.",
            supportsIncremental: true,
            defaultPolicy: { cursor: "updatedAt" },
            cdmModelId: "cdm.doc.item",
          },
        },
        {
          datasetId: "confluence.attachment",
          name: "Confluence Attachments",
          description: "Files and media attached to Confluence pages.",
          fields: [
            { name: "attachmentId", dataType: "STRING", nullable: false },
            { name: "pageId", dataType: "STRING", nullable: false },
            { name: "title", dataType: "STRING", nullable: false },
            { name: "mediaType", dataType: "STRING", nullable: true },
            { name: "fileSize", dataType: "LONG", nullable: true },
            { name: "downloadLink", dataType: "STRING", nullable: true },
            { name: "createdAt", dataType: "TIMESTAMP", nullable: true },
            { name: "createdBy", dataType: "STRING", nullable: true },
          ],
          ingestion: {
            unitId: "confluence.attachment",
            displayName: "Attachments",
            description: "Files and media attached to Confluence pages.",
            supportsIncremental: true,
            defaultPolicy: { cursor: "createdAt" },
            cdmModelId: "cdm.doc.link",
          },
        },
      ],
    },
  },
  {
    id: "http.onedrive",
    family: "HTTP",
    title: "OneDrive",
    vendor: "Microsoft",
    description: "Connect to OneDrive via Microsoft Graph to collect catalog datasets and ingest documents.",
    domain: "docs.onedrive",
    categories: ["storage", "docs"],
    protocols: ["https"],
    versions: [],
    descriptorVersion: "1.0.0",
    docsUrl: "https://learn.microsoft.com/graph/onedrive-concept-overview",
    agentPrompt: "Collect tenant/client credentials and the drive/root path to enumerate files. For CI, use the local stub via ONEDRIVE_GRAPH_BASE_URL.",
    defaultLabels: ["onedrive", "docs"],
    fields: [
      {
        key: "auth_mode",
        label: "Auth mode",
        required: true,
        valueType: "ENUM",
        defaultValue: "stub",
        options: [
          { label: "Stub (local Graph harness)", value: "stub", description: "Use the built-in stub for CI/dev; no external auth required." },
          { label: "Delegated (browser sign-in)", value: "delegated", description: "Sign in with Microsoft to use your own OneDrive via delegated OAuth." },
        ],
        helpText: "Stub remains the default for CI; delegated uses browser sign-in and stored tokens.",
      },
      {
        key: "tenant_id",
        label: "Tenant ID",
        required: false,
        valueType: "TEXT",
        placeholder: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
        helpText: "Azure AD tenant ID. Not required for stub mode; optional for delegated if you want a specific tenant.",
        advanced: true,
      },
      {
        key: "client_id",
        label: "Client ID",
        required: false,
        valueType: "TEXT",
        placeholder: "Azure AD app client ID",
        helpText: "Client ID for the Graph app. Set for delegated auth; not required for stub mode.",
        advanced: true,
      },
      {
        key: "client_secret",
        label: "Client Secret",
        required: false,
        valueType: "PASSWORD",
        placeholder: "Azure AD app client secret",
        sensitive: true,
        helpText: "Client secret for the Graph app. Required for real delegated exchange; not required for stub mode.",
        advanced: true,
      },
      {
        key: "delegated_connected",
        label: "Delegated connection status",
        required: false,
        valueType: "BOOLEAN",
        defaultValue: "false",
        helpText: "Set automatically after the delegated auth callback succeeds.",
        advanced: true,
        visibleWhen: [{ field: "auth_mode", values: ["delegated"] }],
      },
      {
        key: "drive_id",
        label: "Drive ID",
        required: true,
        valueType: "TEXT",
        placeholder: "drive-id or 'me'",
        helpText: "Use 'me' for your personal drive or a specific drive GUID. For stub, any string works.",
      },
      {
        key: "root_path",
        label: "Root path",
        required: false,
        valueType: "TEXT",
        placeholder: "/",
        defaultValue: "/",
        helpText: "Root path within the drive to scan (e.g., /, /Projects).",
      },
      {
        key: "include_file_types",
        label: "Include file types",
        required: false,
        valueType: "TEXT",
        placeholder: "docx,md,txt,pdf",
        helpText: "Comma-separated list of file extensions to include.",
      },
      {
        key: "exclude_patterns",
        label: "Exclude patterns",
        required: false,
        valueType: "TEXT",
        placeholder: "tmp,~$",
        helpText: "Comma-separated substrings to exclude from file names.",
      },
      {
        key: "base_url",
        label: "Graph base URL",
        required: false,
        valueType: "URL",
        placeholder: "http://localhost:8805",
        helpText: "Override Graph base URL (use stub URL in CI). Defaults to ONEDRIVE_GRAPH_BASE_URL or https://graph.microsoft.com/v1.0.",
        defaultValue: process.env.ONEDRIVE_GRAPH_BASE_URL ?? "https://graph.microsoft.com/v1.0",
        advanced: true,
      },
    ],
    capabilities: [
      {
        key: "metadata",
        label: "Metadata collection",
        description: "Enumerates files/folders to emit catalog datasets.",
      },
      {
        key: "preview",
        label: "Preview",
        description: "Supports lightweight previews for text-like docs.",
      },
      {
        key: "ingestion",
        label: "Ingestion",
        description: "Plans slices and ingests docs via staging/CDM sinks.",
      },
    ],
    sampleConfig: {
      templateId: "http.onedrive",
      parameters: {
        auth_mode: "stub",
        drive_id: "drive-stub",
        root_path: "/",
        base_url: "http://localhost:8805",
        include_file_types: "md,txt",
      },
    },
    connection: {
      urlTemplate: "{{base_url}}",
      defaultVerb: "GET",
    },
    extras: {
      ingestionUnits: [
        {
          unitId: "onedrive.docs",
          datasetId: "onedrive.docs",
          kind: "dataset",
          displayName: "OneDrive Documents",
          supportsIncremental: true,
          defaultPolicy: { cursor: "lastModifiedDateTime" },
          cdmModelId: "cdm.doc.item",
        },
      ],
      datasets: [
        {
          datasetId: "onedrive.docs",
          name: "OneDrive Documents",
          description: "Files under the configured OneDrive drive/root path.",
          fields: [
            { name: "id", dataType: "STRING", nullable: false },
            { name: "name", dataType: "STRING", nullable: false },
            { name: "path", dataType: "STRING", nullable: false },
            { name: "mimeType", dataType: "STRING", nullable: true },
            { name: "size", dataType: "LONG", nullable: true },
            { name: "lastModifiedDateTime", dataType: "TIMESTAMP", nullable: true },
          ],
          ingestion: {
            unitId: "onedrive.docs",
            displayName: "Documents",
            description: "Documents and files in OneDrive.",
            supportsIncremental: true,
            defaultPolicy: { cursor: "lastModifiedDateTime" },
            cdmModelId: "cdm.doc.item",
          },
        },
      ],
    },
  },
  {
    id: "jira.http",
    family: "HTTP",
    title: "Jira",
    vendor: "Atlassian",
    description: "Connect to Jira Cloud/Server REST APIs for semantic ingestion.",
    domain: "work.jira",
    categories: ["work-management", "semantic"],
    protocols: ["https"],
    versions: [],
    descriptorVersion: "1.0.0",
    docsUrl: "https://developer.atlassian.com/cloud/jira/platform/rest/v3/",
    agentPrompt: "Collect the Jira base URL (https://<domain>.atlassian.net), authentication method, and optional project filters.",
    defaultLabels: ["jira", "semantic"],
    fields: [
      {
        key: "base_url",
        label: "Base URL",
        required: true,
        valueType: "URL",
        placeholder: "https://your-domain.atlassian.net",
        description: "Root Jira URL without trailing slash.",
      },
      {
        key: "auth_type",
        label: "Authentication",
        required: true,
        valueType: "ENUM",
        defaultValue: "basic",
        options: [
          { label: "Basic (email + API token)", value: "basic" },
          { label: "Personal access token", value: "pat" },
          { label: "OAuth 2.0 client", value: "oauth" },
        ],
      },
      {
        key: "username",
        label: "Username / Email",
        required: false,
        valueType: "TEXT",
        placeholder: "agent@example.com",
        description: "Jira account email used with basic authentication.",
      },
      {
        key: "api_token",
        label: "API token / Password",
        required: false,
        valueType: "PASSWORD",
        sensitive: true,
        description: "API token (for basic auth) or PAT.",
      },
      {
        key: "oauth_client_id",
        label: "OAuth client id",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "oauth_client_secret",
        label: "OAuth client secret",
        required: false,
        valueType: "PASSWORD",
        sensitive: true,
        advanced: true,
      },
      {
        key: "project_keys",
        label: "Project keys",
        required: false,
        valueType: "TEXT",
        placeholder: "ENG,OPS",
        description: "Optional comma-separated project keys to limit scope.",
      },
      {
        key: "jql_filter",
        label: "JQL filter",
        required: false,
        valueType: "TEXT",
        advanced: true,
        description: "Additional JQL applied to issue ingestion requests.",
      },
    ],
    capabilities: [
      {
        key: "metadata",
        label: "Semantic metadata",
        description: "Collects Jira semantic datasets (projects, issues, users).",
      },
      {
        key: "ingest.incremental",
        label: "Incremental ingestion",
        description: "Supports updated-since pagination for issues.",
      },
      {
        key: "ingest.full",
        label: "Full ingestion",
        description: "Projects can be re-synced in full when needed.",
      },
    ],
    sampleConfig: {
      templateId: "jira.http",
      parameters: {
        base_url: "https://example.atlassian.net",
        auth_type: "basic",
        username: "agent@example.com",
        api_token: "token",
        oauth_client_id: "",
        oauth_client_secret: "",
        project_keys: "ENG",
        jql_filter: "",
      },
    },
    connection: {
      urlTemplate: "{{base_url}}",
      defaultVerb: "GET",
    },
    extras: {
      apiCatalog: [
        { key: "project_search", method: "GET", path: "/rest/api/3/project/search", description: "List accessible projects", docUrl: "https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-projects/#api-rest-api-3-project-search-get", scope: "projects" },
        { key: "issue_search", method: "GET", path: "/rest/api/3/search/jql", description: "Search issues via JQL", docUrl: "https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-search/#api-rest-api-3-search-jql-post", scope: "issues" },
        { key: "user_search", method: "GET", path: "/rest/api/3/user/search", description: "Search users by query", docUrl: "https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-users/#api-rest-api-3-user-search-get", scope: "users" },
      ],
      ingestionUnits: [
        {
          unitId: "jira.projects",
          datasetId: "jira.projects",
          kind: "dataset",
          displayName: "Projects",
          description: "Project catalog (key, name, lead, type).",
          supportsIncremental: false,
          cdmModelId: "cdm.work.project",
        },
        {
          unitId: "jira.issues",
          datasetId: "jira.issues",
          kind: "dataset",
          displayName: "Issues",
          description: "Work items (issues/epics/tasks) with incremental sync.",
          supportsIncremental: true,
          defaultPolicy: { cursor: "fields.updated" },
          cdmModelId: "cdm.work.item",
        },
        {
          unitId: "jira.users",
          datasetId: "jira.users",
          kind: "dataset",
          displayName: "Users",
          description: "Directory of Jira users referenced by work items.",
          supportsIncremental: false,
          cdmModelId: "cdm.work.user",
        },
        {
          unitId: "jira.comments",
          datasetId: "jira.comments",
          kind: "dataset",
          displayName: "Comments",
          description: "Issue comments with incremental sync on updated timestamp.",
          supportsIncremental: true,
          defaultPolicy: { cursor: "updated" },
          cdmModelId: "cdm.work.comment",
        },
        {
          unitId: "jira.worklogs",
          datasetId: "jira.worklogs",
          kind: "dataset",
          displayName: "Worklogs",
          description: "Time tracking entries recorded against issues.",
          supportsIncremental: true,
          defaultPolicy: { cursor: "started" },
          cdmModelId: "cdm.work.worklog",
        },
      ],
    },
  },
  {
    id: "cdm.jdbc",
    family: "JDBC",
    title: "CDM Postgres Sink",
    vendor: "PostgreSQL",
    description: "Provision and manage CDM work tables in Postgres for semantic ingestion sinks.",
    domain: "cdm.work",
    categories: ["cdm", "sink"],
    protocols: ["jdbc"],
    versions: ["12.x", "13.x", "14.x", "15.x"],
    descriptorVersion: "1.0.0",
    defaultPort: 5432,
    defaultLabels: ["template:jdbc", "sink:cdm"],
    fields: [
      {
        key: "connection_url",
        label: "Connection URL",
        required: true,
        valueType: "TEXT",
        description: "Postgres connection string (postgres://user:pass@host:port/database).",
      },
      {
        key: "schema",
        label: "Schema",
        required: true,
        valueType: "TEXT",
        placeholder: "cdm_work",
        semantic: "SCHEMA",
      },
      {
        key: "table_prefix",
        label: "Table prefix",
        required: false,
        valueType: "TEXT",
        placeholder: "cdm_",
        helpText: "Optional prefix when autoprovisioning CDM tables.",
      },
      {
        key: "ssl_mode",
        label: "SSL mode",
        required: false,
        valueType: "ENUM",
        options: [
          { label: "Disable", value: "disable" },
          { label: "Prefer", value: "prefer" },
          { label: "Require", value: "require" },
          { label: "Verify CA", value: "verify-ca" },
          { label: "Verify Full", value: "verify-full" },
        ],
        defaultValue: "prefer",
        advanced: true,
      },
    ],
    capabilities: [
      {
        key: "sink.cdm",
        label: "CDM sink",
        description: "Accepts CDM work records when ingestion runs in CDM mode.",
      },
      {
        key: "sink.autoprovision",
        label: "Autoprovision tables",
        description: "Supports provisioning CDM tables per model.",
      },
    ],
    sampleConfig: {
      templateId: "cdm.jdbc",
      parameters: {
        connection_url: "postgres://postgres:postgres@localhost:5432/jira_plus_plus",
        schema: "cdm_work",
        table_prefix: "cdm_",
        ssl_mode: "prefer",
      },
    },
    extras: {
      supportedCdmModels: ["cdm.work.project", "cdm.work.user", "cdm.work.item", "cdm.work.comment", "cdm.work.worklog"],
      defaultSchema: "cdm_work",
    },
  },
];

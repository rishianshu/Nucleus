import type { EndpointTemplate } from "../types.js";

export const DEFAULT_ENDPOINT_TEMPLATES: EndpointTemplate[] = [
  {
    id: "jdbc.postgres",
    family: "JDBC",
    title: "PostgreSQL",
    vendor: "PostgreSQL",
    description: "Register a PostgreSQL instance via JDBC so collections can profile schemas and datasets.",
    domain: "metadata.endpoint.jdbc",
    categories: ["database", "warehouse"],
    protocols: ["jdbc"],
    versions: ["12.x", "13.x", "14.x", "15.x"],
    descriptorVersion: "1.0.0",
    defaultPort: 5432,
    driver: "org.postgresql.Driver",
    docsUrl: "https://www.postgresql.org/docs/current/libpq-connect.html",
    defaultLabels: ["template:jdbc", "template:postgres"],
    fields: [
      {
        key: "host",
        label: "Host",
        required: true,
        valueType: "TEXT",
        placeholder: "localhost",
        description: "Hostname or IP for your Postgres instance.",
      },
      {
        key: "port",
        label: "Port",
        required: true,
        valueType: "PORT",
        defaultValue: "5432",
      },
      {
        key: "database",
        label: "Database",
        required: true,
        valueType: "TEXT",
        placeholder: "postgres",
      },
      {
        key: "username",
        label: "Username",
        required: true,
        valueType: "TEXT",
      },
      {
        key: "password",
        label: "Password",
        required: true,
        valueType: "PASSWORD",
        sensitive: true,
      },
      {
        key: "schemas",
        label: "Schemas",
        required: false,
        valueType: "TEXT",
        placeholder: "public",
        helpText: "Comma-separated schemas to include. Leave blank for all.",
      },
      {
        key: "role",
        label: "Role",
        required: false,
        valueType: "TEXT",
        description: "Optional Postgres role to assume after connecting.",
      },
      {
        key: "ssl_mode",
        label: "SSL mode",
        required: false,
        valueType: "ENUM",
        options: [
          { label: "Disable", value: "disable" },
          { label: "Prefer", value: "prefer" },
          { label: "Require", value: "require" },
          { label: "Verify CA", value: "verify-ca" },
          { label: "Verify Full", value: "verify-full" },
        ],
        defaultValue: "prefer",
      },
      {
        key: "ssl_root_cert",
        label: "SSL root cert",
        required: false,
        valueType: "TEXT",
        description: "Base64 or path to the CA certificate.",
        advanced: true,
      },
      {
        key: "ssl_client_cert",
        label: "SSL client cert",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "ssl_client_key",
        label: "SSL client key",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "application_name",
        label: "Application name",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
      {
        key: "connect_timeout_ms",
        label: "Connect timeout (ms)",
        required: false,
        valueType: "NUMBER",
        advanced: true,
      },
      {
        key: "statement_timeout_ms",
        label: "Statement timeout (ms)",
        required: false,
        valueType: "NUMBER",
        advanced: true,
      },
      {
        key: "additional_parameters",
        label: "Additional parameters",
        required: false,
        valueType: "TEXT",
        placeholder: "search_path=public",
        advanced: true,
      },
      {
        key: "version_hint",
        label: "Version hint",
        required: false,
        valueType: "TEXT",
        advanced: true,
      },
    ],
    capabilities: [
      {
        key: "metadata",
        label: "Metadata collection",
        description: "Enables schema and dataset discovery for catalog views.",
      },
      {
        key: "preview",
        label: "Dataset preview",
        description: "Allow dataset preview queries when supported by the agent.",
      },
    ],
    sampleConfig: {
      templateId: "jdbc.postgres",
      parameters: {
        host: "localhost",
        port: "5432",
        database: "jira_plus_plus",
        username: "postgres",
        password: "postgres",
        schemas: "public",
        role: "",
        ssl_mode: "prefer",
        ssl_root_cert: "",
        ssl_client_key: "",
        ssl_client_cert: "",
        application_name: "",
        connect_timeout_ms: "",
        statement_timeout_ms: "",
        version_hint: "",
        additional_parameters: "",
      },
    },
    connection: {
      urlTemplate: "jdbc:postgresql://{{host}}:{{port}}/{{database}}",
      defaultVerb: "GET",
    },
  },
];

id: issue-insight.v1
goal: >
  Produce actionable insights for work items (issues, tasks) covering risks, ownership, and sentiment.
version: 1.0.0
model:
  provider: anthropic
  name: claude-3-haiku-20240307
  temperature: 0.2
template: |
  You are an insights analyst for engineering work items.
  Use ONLY the structured fields below. Do not speculate. Respond with STRICT JSON matching the schema.

  Issue Key: {{issueKey}}
  Summary: {{issueSummary}}
  Status: {{issueStatus}} ({{statusCategory}})
  Priority: {{priority}}
  Due Date: {{dueDate}}
  Resolved At: {{resolvedAt}}
  Assignee: {{assignee}}
  Reporter: {{reporter}}
  Blockers: {{blockers}}
  Waiting On: {{waitingOn}}
  Recent Worklogs: {{recentWorklogs}}
  Recent Comments: {{recentComments}}
  Tags/Labels: {{labels}}
  Additional Context: {{additionalNotes}}

  Return JSON:
  {
    "summary": { "text": string, "confidence": number?, "provider": string? },
    "sentiment": { "label": "positive"|"neutral"|"negative", "score": number, "tones": string[], "provider": string? },
    "signals": [ { "type": string, "severity": "low"|"medium"|"high", "detail": string, "metadata": object? } ],
    "escalationScore": number,
    "expiresAt": string|null,
    "requirement": string|null,
    "waitingOn": [string]
  }
inputSchema:
  type: object
  properties:
    issueKey: { type: string }
    issueSummary: { type: string }
    issueStatus: { type: string }
    statusCategory: { type: string }
    priority: { type: string }
    dueDate: { type: string }
    resolvedAt: { type: string }
    assignee: { type: string }
    reporter: { type: string }
    blockers: { type: string }
    waitingOn: { type: string }
    recentWorklogs: { type: string }
    recentComments: { type: string }
    labels: { type: string }
    additionalNotes: { type: string }
  required:
    - issueKey
    - issueSummary
    - issueStatus
    - statusCategory
    - priority
    - dueDate
outputSchema:
  type: string
cache:
  enabled: true
  ttlSeconds: 900

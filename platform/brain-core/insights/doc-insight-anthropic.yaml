id: doc-insight.v1
goal: >
  Extract insights for documents/pages: ownership, freshness, links, and potential gaps.
version: 1.0.0
model:
  provider: anthropic
  name: claude-3-haiku-20240307
  temperature: 0.2
template: |
  You are an insights analyst for documentation and knowledge pages.
  Use ONLY the structured fields below. Do not speculate. Respond with STRICT JSON matching the schema.

  Doc ID: {{docId}}
  Title: {{title}}
  Path/URL: {{url}}
  Space/Project: {{space}}
  Owner: {{owner}}
  Last Updated: {{updatedAt}}
  Created At: {{createdAt}}
  Tags/Labels: {{labels}}
  Inbound Links: {{inboundLinks}}
  Outbound Links: {{outboundLinks}}
  Views (recent): {{recentViews}}
  Comments (recent): {{recentComments}}
  Additional Context: {{additionalNotes}}

  Return JSON:
  {
    "summary": { "text": string, "confidence": number?, "provider": string? },
    "sentiment": { "label": "positive"|"neutral"|"negative", "score": number, "tones": string[], "provider": string? },
    "signals": [ { "type": string, "severity": "low"|"medium"|"high", "detail": string, "metadata": object? } ],
    "escalationScore": number,
    "expiresAt": string|null,
    "requirement": string|null,
    "waitingOn": [string]
  }
inputSchema:
  type: object
  properties:
    docId: { type: string }
    title: { type: string }
    url: { type: string }
    space: { type: string }
    owner: { type: string }
    updatedAt: { type: string }
    createdAt: { type: string }
    labels: { type: string }
    inboundLinks: { type: string }
    outboundLinks: { type: string }
    recentViews: { type: string }
    recentComments: { type: string }
    additionalNotes: { type: string }
  required:
    - docId
    - title
    - url
    - updatedAt
outputSchema:
  type: string
cache:
  enabled: true
  ttlSeconds: 900

- 2025-11-12: INTENT.md and SPEC.md were previously absent; now that canonical files exist we treat them as the sole source of truth (schemas kept only as references).
- 2025-11-12: Map Keycloak realm roles to the spec matrix as reader→viewer, writer→editor, admin→admin until dedicated viewer/editor roles exist.
- 2025-11-14: Verified `endpoints(projectSlug)` now returns freshly registered rows by creating “CLI Endpoint 1763102698” via GraphQL (writer token) and immediately querying `endpoints(projectSlug:\"global\", search:\"CLI Endpoint 1763102698\")`, which returned the new ID; the endpoint was then soft-deleted via admin token to keep the catalog clean.
- 2025-11-14: Acceptance coverage audit — AC1/AC5 are only partially exercised (`metadata endpoints can be registered, edited, and deleted` lacks auto-run + catalog cleanup assertions), AC2 is covered (`metadata editor can trigger collection runs and see status chip`), AC3/AC4 have no wrong-credential regression tests, and AC6 currently relies on the broad workspace smoke test; extend Playwright coverage to close those gaps.
- 2025-11-14: Implemented true endpoint soft-delete semantics (Prisma schema + metadata core + GraphQL resolvers), filtering catalog/endpoint datasets for deleted endpoints and updating the admin UI e2e to assert catalog cleanup, `E_ENDPOINT_DELETED` trigger responses, and historical run retention.
- 2025-11-14: Added UI-state Playwright coverage (empty catalog filter + injected GraphQL failure in `metadata workspace surfaces ADR-0001 UI states`) to satisfy AC6 evidence for loading/data/empty/error/auth flows.
- 2025-11-14: Added Playwright coverage for AC3/AC4 (`metadata endpoint credential regression requires fix before trigger`) so wrong-credential regressions now emit `E_CONN_TEST_FAILED`/`E_CONN_INVALID` deterministically while credential restores prove trigger success.
- 2025-11-14: Added `scripts/keycloak/sync-client.mjs` + env scope defaults so local Keycloak automatically exposes `preferred_username` + realm roles in metadata tokens; designer sidebar now shows friendly identities and admin-only actions (Delete) without depending on deprecated scopes (`profile`, `email`, `roles`).
- 2025-11-14 — Allowed metadata API to bypass forced credential validation when `X-Metadata-Test-Write: 1` is present so Playwright can seed bad passwords, while `triggerCollection` still raises `E_CONN_INVALID` with a "Connection test failed" message for UI evidence.
- 2025-11-14: Split metadata workspace GraphQL calls so endpoints load independently, templates fetch on demand, collections fetch lazily, and delete flows mutate local state instead of forcing a full refresh, improving perceived performance.
- 2025-11-15: ACCEPTANCE AC1–AC6 verified end-to-end — API lifecycle covered by `tests/metadata-lifecycle.spec.ts` (register/update/delete + template probing at lines 25–131) while UI automation in `tests/metadata-auth.spec.ts` exercises: AC1 register/test/edit flow with catalog assertions (lines 129–203), AC2 manual trigger & collections status chip (306–338), AC3 wrong-credential banner + E_CONN codes (340–371), AC4 credential recovery + successful trigger (371–388), AC5 admin soft-delete removing catalog datasets and blocking triggers (239–283), and AC6 ADR-0001 UI state transitions under empty/error/auth scenarios (391–420).

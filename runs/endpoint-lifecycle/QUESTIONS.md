
- 2025-11-13: After reloading INTENT/SPEC, the Playwright lifecycle suite (`corepack pnpm check:metadata-auth`) now fails consistently because freshly registered endpoints never show up via the `endpoints` query/UI for the active project. Evidence: every run reports `locator('[data-testid='metadata-endpoint-card']').filter({ hasText: 'Trigger Endpoint …' })` not found, and dataset seeding via GraphQL (using admin tokens) cannot locate the endpoint by name even after multiple retries. Manual GraphQL queries against `metadataEndpoints` *do* show the created rows (IDs like `Trigger Endpoint 1763093949742`), but the UI/`endpoints(projectSlug)` feed continues to serve only the seeded “Smoke Endpoint …” set. Need guidance on whether `projectSlug`/Keycloak claims changed with the new INTENT or if we should switch the Designer/automation back to `metadataEndpoints` to satisfy AC1–AC5. Without a consistent API for listing freshly registered endpoints, we cannot complete the acceptance verification loop. *(RESOLVED 2025-11-14: stack restart + proxy fixed; see fourth bullet)*
- 2025-11-13: Need to ship UI automation for endpoint lifecycle per ACCEPTANCE, but the Designer/metadata stack isn’t running during tests. `corepack pnpm check:metadata-auth` fails immediately (`connect ECONNREFUSED ::1:4010`) because `METADATA_GRAPHQL_ENDPOINT`/`METADATA_WEB_URL` aren’t reachable. Can we get instructions (or CI hooks) to start the metadata API + designer UI so Playwright can exercise the UI? Without that stack, the browser tests can’t proceed. *(RESOLVED 2025-11-14: start-dev-stack script now runs before tests.)*
- 2025-11-13: Metadata Designer dev server proxies /graphql to reporting API (localhost:4002). Even with reporting API running, requests return 500/401 ('Authentication required'), so the metadata workspace never loads endpoints/templates and Playwright can't reach the register/edit UI. Need either designer wired to metadata API (4010) or instructions to seed/reporting API to satisfy workspace queries before UI automation can pass. *(RESOLVED 2025-11-14: designer now proxies `/metadata/graphql` to metadata API.)*
- 2025-11-14: RESOLVED — After restarting the full dev stack (Keycloak + metadata/reporting/designer) and ensuring Vite proxies hit `/metadata/graphql`, the `endpoints(projectSlug)` query now returns newly registered endpoints (verified via curl + passing `corepack pnpm check:metadata-auth`), so UI automation can enumerate them without falling back to `metadataEndpoints`. Keeping question #1 noted here for traceability but no longer blocking.
- 2025-11-14: Despite editing `apps/reporting-designer/src/auth/AuthProvider.tsx` (and related files) and restarting the stack, the dev server on http://127.0.0.1:5176 continues to serve the previous bundle. Evidence: new console logs (`[AuthLoop] auth:role`, `[MetadataWorkspace] userRole prop …`) and debug hooks (`window.__metadataAuthRole`, `document.body.dataset.metadataAuthRole`) never appear in the browser/Playwright output even though the source shows the changes. Without the designer picking up source edits, I can’t fix the viewer/admin role gating or the acceptance UI tests. Need guidance on how to clear/refresh the designer build so it uses the current workspace files (or whether a different frontend build should be targeted). *(RESOLVED 2025-11-15: removing legacy `.js` copies (queries.js, AuthProvider.js, etc.) forced Vite to use the TS sources; designer now reflects source edits.)*

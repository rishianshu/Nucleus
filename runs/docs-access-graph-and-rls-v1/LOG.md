2025-12-06T09:26:36Z | start | done: booting run | next: read PLAN/LOG/TODO per RESUME protocol | risks: none yet
2025-12-06T09:33:00Z | heartbeat | done: loaded INTENT/SPEC/ACCEPTANCE, drafted initial plan steps in PLAN.md | next: map KB ACL model/registry + ingestion data paths for Confluence/OneDrive (define nodes/edges metadata and storage strategy) | risks: none yet
2025-12-06T09:39:24Z | heartbeat | done: added KB meta defaults for principal.user/group + HAS_MEMBER/CAN_VIEW_DOC; captured ACL ingestion/RLS outline in DECISIONS | next: design storage/index strategy (KB vs RLS table) and start implementing ACL ingestion plumbing | risks: ensure additive changes keep KB consumers stable
2025-12-06T09:54:24Z | heartbeat | done: recorded RLS storage strategy (cdm_doc_access table) and TODOs for ingestion scaffolding; updated plan | next: design schema changes + docStore/resolver secured flag; sketch ingestion unit plumbing | risks: db schema changes must stay backward compatible; ci-check pending
2025-12-06T10:08:24Z | heartbeat | done: added CDM sink table definition for doc access (cdm.doc.access) to support RLS index writes | next: design docStore/resolver secured filtering against access table; plan ingestion scaffolding | risks: needs DB migration alignment; still pending tests/ci-check
2025-12-06T10:13:56Z | heartbeat | done: added access-aware filtering scaffolding to docStore (joins cdm_doc_access when principal ids provided, fail-closed fallback); api/ui builds green | next: design resolver secured flag/principal resolution + ingestion scaffolding | risks: access table must exist when access filter used; no tests yet
2025-12-06T10:59:06Z | heartbeat | done: captured auth email into context for principal resolution; GraphQL secured filter uses subject/email; added placeholder confluence ACL ingestion handler; api/ui builds green | next: design/implement actual ACL ingestion (Confluence/OneDrive) writing cdm_doc_access + KB edges and add resolver tests | risks: cdm_doc_access table needs migration; ACL handler is stub; RLS still untested
2025-12-06T11:42:14Z | heartbeat | done: added ACL ingestion units (confluence.acl, onedrive.acl) with configurable principals, emitting cdm.doc.access records; catalog entries added; api/ui builds green | next: wire KB edge upserts and add resolver/ingestion tests; consider migration alignment for cdm_doc_access | risks: ACL data currently synthetic (defaults to public principals); lacks KB edge writes/tests
2025-12-06T12:25:00Z | heartbeat | done: attempted KB edge wiring but blockedâ€”ingestion runtime lacks graph client; added questions about migration path for cdm_doc_access and KB edge upsert strategy | next: await guidance on migration + KB edge path; then implement edge writes/tests once clarified | risks: progress blocked until migration/graph upsert approach is decided
2025-12-06T13:03:52Z | heartbeat | done: added cdm_doc_access migration; reinforced secured filter plumbing (docStore/entityStore) with explicit params; builds green | next: add resolver tests seeded via fixtures and ingestion unit tests writing cdm_doc_access; align UI if needed | risks: migration not yet applied in env; ACL data still synthetic until real principal mapping added
2025-12-06T13:32:49Z | heartbeat | done: added RLS resolver tests for secured principal injection/admin bypass, ran cdmResolvers test + api/ui builds green | next: add ingestion unit tests for ACL writes and (optionally) seed fixtures; consider UI surfacing access summary | risks: migration still pending application; ingestion ACL remains synthetic defaults
2025-12-06T14:36:01Z | heartbeat | done: added CDM sink ACL write test; api/ui builds and targeted tests green | next: consider minimal ingestion ACL fixture + UI access summary; prep final wrap-up/state updates | risks: migration still pending apply; ACL principals still synthetic
2025-12-06T14:46:10Z | heartbeat | done: added minimal ACL principal enrichment in Confluence/OneDrive handlers (current user/client hint) and reran sink ACL test + builds | next: wrap-up with remaining notes; migration apply still pending; optional UI access summary | risks: ACL principals still mostly synthetic; needs real principal mapping later
